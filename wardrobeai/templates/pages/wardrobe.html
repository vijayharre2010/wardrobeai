<div class="content-card">
    <h1 class="page-title">
        <i data-lucide="shirt" class="icon"></i>
        My Wardrobe
    </h1>
    <p style="font-size: 1.1rem; color: #cccccc; margin-bottom: 2rem;">
        Manage your wardrobe items and saved favourite outfits
    </p>
</div>

<div class="content-card">
    <h2 class="section-title">
        <i data-lucide="package" class="icon-small"></i>
        Wardrobe Items
    </h2>
    <div style="display: flex; flex-direction: column; gap: 1rem;">
        {% for item in wardrobe_items %}
        <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: linear-gradient(145deg, #2a2a2a 0%, #1f1f1f 100%); border-radius: 8px;">
            <i data-lucide="shirt" class="icon-small" style="color: #B19CD9;"></i>
            <div style="flex: 1;">
                <div style="font-weight: 600; color: #ffffff;">{{ item.name }}</div>
                <div style="font-size: 0.8rem; color: #888;">Category: {{ item.category }}{% if item.color %} | Color: {{ item.color }}{% endif %}{% if item.size %} | Size: {{ item.size }}{% endif %}</div>
            </div>
            <div style="font-size: 0.8rem; color: #666;">Added {{ item.added_at[:10] }}</div>
        </div>
        {% endfor %}
        {% if not wardrobe_items %}
        <div style="text-align: center; color: #888; padding: 2rem;">
            No wardrobe items yet. Add items to track your collection.
        </div>
        {% endif %}
    </div>
</div>

<div class="content-card">
    <h2 class="section-title">
        <i data-lucide="heart" class="icon-small"></i>
        Favourite Outfits
    </h2>
    <div class="grid grid-2">
        {% for fav in favourites %}
        <div style="background: linear-gradient(145deg, #2a2a2a 0%, #1f1f1f 100%); border-radius: 12px; padding: 1rem; position: relative;">
            {% if fav.image_url %}
            <img src="{{ fav.image_url }}" alt="Favourite outfit" style="width: 100%; height: 150px; object-fit: cover; border-radius: 8px; margin-bottom: 1rem;">
            {% endif %}
            <h4 style="color: #ffffff; margin-bottom: 0.5rem;">{{ fav.outfit_type.title() }} Outfit</h4>
            <p style="color: #cccccc; font-size: 0.9rem; margin-bottom: 1rem;">{{ fav.outfit_description }}</p>
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div style="font-size: 0.8rem; color: #666;">Saved {{ fav.created_at[:10] }}</div>
                <button class="btn-secondary remove-fav" data-id="{{ fav.id }}" style="padding: 0.5rem 1rem; font-size: 0.8rem;">
                    <i data-lucide="trash-2" class="icon-small"></i>
                    Remove
                </button>
            </div>
        </div>
        {% endfor %}
        {% if not favourites %}
        <div style="text-align: center; color: #888; padding: 2rem; grid-column: span 2;">
            No favourite outfits yet. Save outfits from Daily Suggestions or AI Generator.
        </div>
        {% endif %}
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.remove-fav').forEach(btn => {
        btn.addEventListener('click', async function() {
            const favId = this.getAttribute('data-id');
            if (confirm('Remove this favourite?')) {
                try {
                    const response = await fetch('/remove_favourite', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ favourite_id: favId })
                    });
                    const data = await response.json();
                    if (data.success) {
                        location.reload();
                    } else {
                        alert('Failed to remove favourite');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('Error removing favourite');
                }
            }
        });
    });
});
</script>